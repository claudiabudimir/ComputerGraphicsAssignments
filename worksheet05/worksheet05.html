<!DOCTYPE html>
<meta charset="UTF-8">
<head>
    <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vPosition;
    attribute vec4 vNormal;

    varying vec4 fColor;

    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;

    uniform vec4 diffuseCoefficient;
    uniform float ambientCoefficient;
    uniform vec3 lightAmbient; //L_a
    uniform vec4 lightPosition; //i_e
    uniform vec3 lightEmission; //L_e

    void main()
    {
        gl_Position =  projectionMatrix * modelViewMatrix * vPosition;

        vec4 pos = modelViewMatrix * vPosition;
        vec3 w_i = lightPosition.w == 0.0 ? normalize(-lightPosition.xyz) : normalize(lightPosition.xyz - pos.xyz);
        vec3 norm = normalize(vNormal.xyz);
        float cos_phi = dot(norm, w_i);

        //We assume V = 1, therefore L_i = L_e
        vec3 light_incident = lightEmission;

        //L_d
        vec3 light_diffuse = diffuseCoefficient.xyz * light_incident * max(cos_phi, 0.0);

        //L_o
        vec3 light_out = light_diffuse + ambientCoefficient * lightAmbient;

        fColor = vec4(light_out, diffuseCoefficient.a);
    }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    varying vec4 fColor;
    void main() {
        gl_FragColor = fColor;
    }

    </script>
    <script type="text/javascript" src="../../Common/library.js"></script>
    <script type="text/javascript" src="../../Common/webgl-utils.js"></script>
    <script type="text/javascript" src="../../Common/initShaders.js"></script>
    <script type="text/javascript" src="../../Common/MV.js"></script>
    <script type="text/javascript" src="../../Common/OBJParser.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-light bg-dark">
    <span class="navbar-brand mb-0 h1 text-white"><a href="../../">02561 - Computer Graphics</a></span>
</nav>
<div class="text-center">
    <canvas id="gl-canvas" width="512" height="512">
        Sorry your web browser does not support HTML5s canvas element.
    </canvas>
    <div class="row justify-content-center">
        <div class="col-5">
            <button onclick="program.toggleAnimation()" class="btn btn-primary">Toggle orbit</button>
        </div>
    </div>
</div>
</body>
</html>